# short explaination for the code 
# num_cases_per_iteration is limited by the real case number
library("readxl")
source("Rscript/active_learning.R")
<<<<<<< Updated upstream
#library("tidyverse")
=======
library("tidyverse")
>>>>>>> Stashed changes
source("Rscript/sim_output.R")
load("Data/glance_dec_data_test.R")

sampling_input <- read_excel("Data/Sampling_input.xlsx")
# have another table input for simulation number choice
<<<<<<< Updated upstream
param_input <- read_excel("Data/param_input.xlsx")
add_effn = 150
nburnin = 0
=======
total_nboot = 0
Sim_n = 50
num_cases_per_iteration = 10
total_iter = 150/num_cases_per_iteration
reduce_simulations_by_logic = TRUE
nburnin = 2
>>>>>>> Stashed changes
verbose = FALSE

<<<<<<< Updated upstream
total_iter = add_effn/param_input$num_cases_per_iteration
res_total= replicate(length(param_input$Sim_n), data.frame())


for(j in 1:length(param_input$Sim_n)){
  inputparameter <- data.frame(param_input$num_cases_per_iteration[j],total_iter[j], nburnin,param_input$total_nboot[j],verbose,param_input$Sim_n[j])
  colnames(inputparameter) <- c("num_cases_per_iteration","total_iter", "nburnin","total_nboot","verbose","Sim_n")
  res_top_loop = replicate(tail(sampling_input$sim_order, 1), data.frame())
  
  for(i in 1:tail(sampling_input$sim_order, 1)){
    
    res_in_loop <- sim_output(df,sampling_input[i,],inputparameter)
    print(paste("res number",i,"is finished"))
    res_top_loop[[i]] <- res_in_loop
  }
  res_total[[j]] <- res_top_loop
}  
  
save(res_total, file = "Data/res_analysis_data3.R")
=======
res_total = replicate(tail(sampling_input$sim_order, 1), data.frame())
for(i in 1:tail(sampling_input$sim_order, 1))
  {
  res_in_loop <- sim_output(df,sampling_input[i,],inputparameter)
  print(paste("res number",i,"is finished"))
  res_total[[i]] <- res_in_loop
}
if(Sim_n >1 & num_cases_per_iteration ==1){
  save(res_total, file = "Data/res_analysis_test1.R")
} else if(Sim_n ==1 & num_cases_per_iteration ==1){
  save(res_total, file = "Data/res_analysis_test2.R")
} else if(Sim_n >1 & num_cases_per_iteration == 10){
  save(res_total, file = "Data/res_analysis_test3.R")
}
>>>>>>> Stashed changes


 